---
title: "Logistic Regression"
format: gfm
---

During this class we will:

- Interpret logistic regression coefficients
- Review assumption diagnostics and remedies
- Expand diagnostics and remedies to GLMs

To share their solution for Exercise 13, the randomly selected student is **___**.

## Learn

You can also download the slides as an .html file. Once you've previewed the material and identified any questions, start watching the lecture.

Why is modeling the mean of a normal distribution with a linear function of predictors a good model? Go the discussions to share before continuing with the lecture.

Discuss ideas as a group for your second project. What might the business objective and the data story be? Go the discussions to share before finishing the lecture.

## Data Dictionary

Sales leads data for B2B electronic sales. Each of the rows represents one lead along with its resulting Stage (i.e., Qualified or Disqualified) along with various lead features.

- **Stage**: Progress through the sales development pipeline
- **Industry**: The type of product or service the business provides
- **Employees**: The size of company based on the number of employees
- **TimeZone**: The Leadâ€™s time zone
- **LeadSource**: The source of the data for the Lead
- **days_elapsed**: Number of days elapsed since Lead creation
- **created_quarter**: Quarter of the Lead creation
- **contact_quarter**: Quarter when the Lead was first contacted
- **latest_quarter**: Quarter when the Lead was last contacted
- **EmployeeId**: Unique ID for the sales rep assigned to the Lead
- **ActivityTypeEmail**: Count of email contacts with the Lead
- **ActivityTypePhone Call**: Count of call contacts with the Lead
- **ActivityTypeEmail Response**: Count of email responses with the Lead
- **ActivityTypeMeeting**: Count of meetings with the Lead
- **ActivityTypeLead Handraise**: Count of times Lead requesting information
- **ActivityTypeWeb Schedule**: Count of times Lead scheduling an appointment
- **Amount**: Estimate of how much the Lead is worth if closed

```{python}
#| eval: false
#| echo: true

import os
import polars as pl
import polars.selectors as cs
import seaborn.objects as so
import statsmodels.formula.api as smf
import bambi as bmb
import arviz as az

# Import data
leads = (pl.read_parquet(os.path.join('data', 'original_leads.parquet'))
    .select(['Stage', 'Industry', 'Employees', 'TimeZone', 'LeadSource',
        'days_elapsed', 'created_quarter', 'contact_quarter', 'latest_quarter',
        'EmployeeId', cs.starts_with('ActivityType'), 'Amount'])
    .select(pl.exclude(['ActivityTypeAbandon']))
)

# Write data frames
leads.write_parquet(os.path.join('data', 'leads.parquet'))
```

## Apply

### Exercise 13

1. Simulate lead qualification data as a function of four or more predictors
2. Instead of `y`, `x1`, etc. use meaningful variable names
3. Assume `y` is distributed binomial with a linear model and logit link function
4. Use different parameter values than we did in class (keep them small)
5. Comment your code clearly
6. Visualize the simulated data using at least two different plots
7. Demonstrate that you can recover the parameters you used to simulate the data using either a frequentist or Bayesian model
8. Submit your code and printed output as a PDF on Canvas

### Milestone 13

Start with a narrative of where your data come from, a data story. Simulate data for your project consistent with this data story so you have data to work with as you finalize searching for a dataset you can use. Test your code and demonstrate you can recover parameters.

